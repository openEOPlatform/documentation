<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Crop Classification | openEO Platform Documentation</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="One of the most important properties for a future-oriented platform on earth observation is the orientation towards simple operation, with a special focus on efficiency of evaluation and availability. Complexity is kept hidden in the background to direct your focus on the data. This is done on one hand by the use of an aggregate API to access the infrastructure, but also by improved user-faced graphical processing. For access to the API, the user has the option to incorporate his own preferences, by choosing between several clients.">
    
    <link rel="preload" href="/assets/css/0.styles.ca0b67be.css" as="style"><link rel="preload" href="/assets/js/app.78c61d3e.js" as="script"><link rel="preload" href="/assets/js/11.b8f6fce6.js" as="script"><link rel="preload" href="/assets/js/5.386332f3.js" as="script"><link rel="preload" href="/assets/js/77.d600039d.js" as="script"><link rel="preload" href="/assets/js/55.e65335cd.js" as="script"><link rel="prefetch" href="/assets/js/1.976cd426.js"><link rel="prefetch" href="/assets/js/10.f6ba118e.js"><link rel="prefetch" href="/assets/js/12.930b5032.js"><link rel="prefetch" href="/assets/js/13.a560c1b3.js"><link rel="prefetch" href="/assets/js/14.ffa12f5e.js"><link rel="prefetch" href="/assets/js/15.440a6750.js"><link rel="prefetch" href="/assets/js/16.883b5f6c.js"><link rel="prefetch" href="/assets/js/17.4107c372.js"><link rel="prefetch" href="/assets/js/18.f71f0370.js"><link rel="prefetch" href="/assets/js/2.38884927.js"><link rel="prefetch" href="/assets/js/21.03190666.js"><link rel="prefetch" href="/assets/js/22.8d5e217e.js"><link rel="prefetch" href="/assets/js/23.21c244cd.js"><link rel="prefetch" href="/assets/js/24.fc4785ea.js"><link rel="prefetch" href="/assets/js/25.4d35815b.js"><link rel="prefetch" href="/assets/js/26.7290affa.js"><link rel="prefetch" href="/assets/js/27.3509c82d.js"><link rel="prefetch" href="/assets/js/28.d56c49d6.js"><link rel="prefetch" href="/assets/js/29.0c9e662b.js"><link rel="prefetch" href="/assets/js/3.84222e36.js"><link rel="prefetch" href="/assets/js/30.f1082575.js"><link rel="prefetch" href="/assets/js/31.c2553a2d.js"><link rel="prefetch" href="/assets/js/32.bb8c1641.js"><link rel="prefetch" href="/assets/js/33.8fae6d2e.js"><link rel="prefetch" href="/assets/js/34.b0ef92e8.js"><link rel="prefetch" href="/assets/js/35.be8ae1ae.js"><link rel="prefetch" href="/assets/js/36.eefefe2a.js"><link rel="prefetch" href="/assets/js/37.c24a727c.js"><link rel="prefetch" href="/assets/js/38.ae997c92.js"><link rel="prefetch" href="/assets/js/39.1a28e001.js"><link rel="prefetch" href="/assets/js/4.d78aa776.js"><link rel="prefetch" href="/assets/js/40.2ec602db.js"><link rel="prefetch" href="/assets/js/41.a520c8b9.js"><link rel="prefetch" href="/assets/js/42.a9a76b90.js"><link rel="prefetch" href="/assets/js/43.86fec58a.js"><link rel="prefetch" href="/assets/js/44.8856430e.js"><link rel="prefetch" href="/assets/js/45.e8f03d76.js"><link rel="prefetch" href="/assets/js/46.38b4c946.js"><link rel="prefetch" href="/assets/js/47.d7480953.js"><link rel="prefetch" href="/assets/js/48.eb5ce9e4.js"><link rel="prefetch" href="/assets/js/49.d6839edb.js"><link rel="prefetch" href="/assets/js/50.21b40e02.js"><link rel="prefetch" href="/assets/js/51.7739e561.js"><link rel="prefetch" href="/assets/js/52.4250f428.js"><link rel="prefetch" href="/assets/js/53.794ebe1e.js"><link rel="prefetch" href="/assets/js/54.9592df43.js"><link rel="prefetch" href="/assets/js/56.a765d093.js"><link rel="prefetch" href="/assets/js/57.c6d91b6b.js"><link rel="prefetch" href="/assets/js/58.9ba4fef6.js"><link rel="prefetch" href="/assets/js/59.c4fa31a6.js"><link rel="prefetch" href="/assets/js/6.89677a3a.js"><link rel="prefetch" href="/assets/js/60.ef6973d2.js"><link rel="prefetch" href="/assets/js/61.4f5e80d2.js"><link rel="prefetch" href="/assets/js/62.8fa5f288.js"><link rel="prefetch" href="/assets/js/63.4bcb504f.js"><link rel="prefetch" href="/assets/js/64.2cd2ee00.js"><link rel="prefetch" href="/assets/js/65.da8ccf99.js"><link rel="prefetch" href="/assets/js/66.c4596935.js"><link rel="prefetch" href="/assets/js/67.f841e144.js"><link rel="prefetch" href="/assets/js/68.7803e9b4.js"><link rel="prefetch" href="/assets/js/69.ca466834.js"><link rel="prefetch" href="/assets/js/7.18c01b87.js"><link rel="prefetch" href="/assets/js/70.ddf30c7b.js"><link rel="prefetch" href="/assets/js/71.16dd0af8.js"><link rel="prefetch" href="/assets/js/72.68052926.js"><link rel="prefetch" href="/assets/js/73.edf8004d.js"><link rel="prefetch" href="/assets/js/74.82d9c348.js"><link rel="prefetch" href="/assets/js/75.d5cf1fc3.js"><link rel="prefetch" href="/assets/js/76.1d441d53.js"><link rel="prefetch" href="/assets/js/78.8a489522.js"><link rel="prefetch" href="/assets/js/79.c4c1db8e.js"><link rel="prefetch" href="/assets/js/8.17723128.js"><link rel="prefetch" href="/assets/js/80.29521e69.js"><link rel="prefetch" href="/assets/js/81.60bca300.js"><link rel="prefetch" href="/assets/js/82.696c65cc.js"><link rel="prefetch" href="/assets/js/9.1167f966.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.27de8d3c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ca0b67be.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://openeo.cloud/wp-content/themes/openeo_platform/images/logo-pages.svg" alt="openEO Platform Documentation" class="logo"> <span class="site-name can-hide">openEO Platform Documentation</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/data-collections/" class="nav-link">
  Datasets
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Get Started" class="dropdown-title"><span class="title">Get Started</span> <span class="arrow down"></span></button> <button type="button" aria-label="Get Started" class="mobile-dropdown-title"><span class="title">Get Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/join/free_trial.html" class="nav-link">
  Free Trial Registration
</a></li><li class="dropdown-item"><!----> <a href="https://openeo.org/documentation/1.0/datacubes.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Data Cubes
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          Client Libraries
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/getting-started/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/getting-started/python/" class="nav-link">
  Python
</a></li><li class="dropdown-subitem"><a href="/getting-started/r/" class="nav-link">
  R
</a></li></ul></li><li class="dropdown-item"><h4>
          Development Environments
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/getting-started/jupyterlab/" class="nav-link">
  JupyterLab (Python)
</a></li><li class="dropdown-subitem"><a href="/getting-started/editor/" class="nav-link">
  Editor
</a></li></ul></li><li class="dropdown-item"><!----> <a href="https://openeo.org/documentation/1.0/cookbook/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cookbook
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/getting-started/client-side-processing/" class="nav-link">
  Client-Side Processing (Python)
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Clients" class="dropdown-title"><span class="title">Clients</span> <span class="arrow down"></span></button> <button type="button" aria-label="Clients" class="mobile-dropdown-title"><span class="title">Clients</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://open-eo.github.io/openeo-js-client/latest/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://open-eo.github.io/openeo-python-client/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Python
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://open-eo.github.io/openeo-r-client/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  R
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Use Cases" class="dropdown-title"><span class="title">Use Cases</span> <span class="arrow down"></span></button> <button type="button" aria-label="Use Cases" class="mobile-dropdown-title"><span class="title">Use Cases</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://openeo.org/documentation/1.0/cookbook/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cookbook
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          Analysis-Ready Data (ARD)
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/usecases/ard/" class="nav-link">
  Overview
</a></li><li class="dropdown-subitem"><a href="/usecases/ard/sar/" class="nav-link">
  SAR (Sentinel-1)
</a></li><li class="dropdown-subitem"><a href="/usecases/ard/msi/" class="nav-link">
  Multi-Spectral Imagery
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/usecases/crop-classification/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Crop Classification
</a></li><li class="dropdown-item"><!----> <a href="/usecases/forest-change-detection/" class="nav-link">
  Forest Change Detection
</a></li><li class="dropdown-item"><!----> <a href="/usecases/landcover/" class="nav-link">
  Land Cover Classification
</a></li><li class="dropdown-item"><!----> <a href="/usecases/no2-monitoring/" class="nav-link">
  NO₂ monitoring
</a></li><li class="dropdown-item"><!----> <a href="/usecases/large-scale-processing/" class="nav-link">
  Large scale processing
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Processes" class="dropdown-title"><span class="title">Processes</span> <span class="arrow down"></span></button> <button type="button" aria-label="Processes" class="mobile-dropdown-title"><span class="title">Processes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/processes/" class="nav-link">
  JavaScript &amp; R
</a></li><li class="dropdown-item"><!----> <a href="https://open-eo.github.io/openeo-python-client/api.html#module-openeo.rest.datacube" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Python
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/file-formats/" class="nav-link">
  File Formats
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Advanced" class="dropdown-title"><span class="title">Advanced</span> <span class="arrow down"></span></button> <button type="button" aria-label="Advanced" class="mobile-dropdown-title"><span class="title">Advanced</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/federation/accounting.html" class="nav-link">
  Accounting
</a></li><li class="dropdown-item"><!----> <a href="/federation/index.html" class="nav-link">
  Federation Aspects
</a></li><li class="dropdown-item"><!----> <a href="/federation/backends/index.html" class="nav-link">
  Federation Contract
</a></li><li class="dropdown-item"><!----> <a href="/api/" class="nav-link">
  HTTP API
</a></li></ul></div></div><div class="nav-item"><a href="https://openeo.cloud/contact/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contact
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/data-collections/" class="nav-link">
  Datasets
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Get Started" class="dropdown-title"><span class="title">Get Started</span> <span class="arrow down"></span></button> <button type="button" aria-label="Get Started" class="mobile-dropdown-title"><span class="title">Get Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/join/free_trial.html" class="nav-link">
  Free Trial Registration
</a></li><li class="dropdown-item"><!----> <a href="https://openeo.org/documentation/1.0/datacubes.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Data Cubes
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          Client Libraries
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/getting-started/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-subitem"><a href="/getting-started/python/" class="nav-link">
  Python
</a></li><li class="dropdown-subitem"><a href="/getting-started/r/" class="nav-link">
  R
</a></li></ul></li><li class="dropdown-item"><h4>
          Development Environments
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/getting-started/jupyterlab/" class="nav-link">
  JupyterLab (Python)
</a></li><li class="dropdown-subitem"><a href="/getting-started/editor/" class="nav-link">
  Editor
</a></li></ul></li><li class="dropdown-item"><!----> <a href="https://openeo.org/documentation/1.0/cookbook/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cookbook
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/getting-started/client-side-processing/" class="nav-link">
  Client-Side Processing (Python)
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Clients" class="dropdown-title"><span class="title">Clients</span> <span class="arrow down"></span></button> <button type="button" aria-label="Clients" class="mobile-dropdown-title"><span class="title">Clients</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://open-eo.github.io/openeo-js-client/latest/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://open-eo.github.io/openeo-python-client/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Python
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://open-eo.github.io/openeo-r-client/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  R
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Use Cases" class="dropdown-title"><span class="title">Use Cases</span> <span class="arrow down"></span></button> <button type="button" aria-label="Use Cases" class="mobile-dropdown-title"><span class="title">Use Cases</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://openeo.org/documentation/1.0/cookbook/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cookbook
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><h4>
          Analysis-Ready Data (ARD)
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/usecases/ard/" class="nav-link">
  Overview
</a></li><li class="dropdown-subitem"><a href="/usecases/ard/sar/" class="nav-link">
  SAR (Sentinel-1)
</a></li><li class="dropdown-subitem"><a href="/usecases/ard/msi/" class="nav-link">
  Multi-Spectral Imagery
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/usecases/crop-classification/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Crop Classification
</a></li><li class="dropdown-item"><!----> <a href="/usecases/forest-change-detection/" class="nav-link">
  Forest Change Detection
</a></li><li class="dropdown-item"><!----> <a href="/usecases/landcover/" class="nav-link">
  Land Cover Classification
</a></li><li class="dropdown-item"><!----> <a href="/usecases/no2-monitoring/" class="nav-link">
  NO₂ monitoring
</a></li><li class="dropdown-item"><!----> <a href="/usecases/large-scale-processing/" class="nav-link">
  Large scale processing
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Processes" class="dropdown-title"><span class="title">Processes</span> <span class="arrow down"></span></button> <button type="button" aria-label="Processes" class="mobile-dropdown-title"><span class="title">Processes</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/processes/" class="nav-link">
  JavaScript &amp; R
</a></li><li class="dropdown-item"><!----> <a href="https://open-eo.github.io/openeo-python-client/api.html#module-openeo.rest.datacube" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Python
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/file-formats/" class="nav-link">
  File Formats
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Advanced" class="dropdown-title"><span class="title">Advanced</span> <span class="arrow down"></span></button> <button type="button" aria-label="Advanced" class="mobile-dropdown-title"><span class="title">Advanced</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/federation/accounting.html" class="nav-link">
  Accounting
</a></li><li class="dropdown-item"><!----> <a href="/federation/index.html" class="nav-link">
  Federation Aspects
</a></li><li class="dropdown-item"><!----> <a href="/federation/backends/index.html" class="nav-link">
  Federation Contract
</a></li><li class="dropdown-item"><!----> <a href="/api/" class="nav-link">
  HTTP API
</a></li></ul></div></div><div class="nav-item"><a href="https://openeo.cloud/contact/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Contact
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Crop Classification</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/usecases/crop-classification/#preprocessing-feature-engineering" class="sidebar-link">Preprocessing &amp; feature engineering</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/usecases/crop-classification/#data-preparation" class="sidebar-link">Data preparation</a></li><li class="sidebar-sub-header"><a href="/usecases/crop-classification/#computing-temporal-features" class="sidebar-link">Computing temporal features</a></li></ul></li><li><a href="/usecases/crop-classification/#model-training" class="sidebar-link">Model training</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/usecases/crop-classification/#classification" class="sidebar-link">Classification</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/usecases/crop-classification/#rule-based-classification" class="sidebar-link">Rule-based classification</a></li><li class="sidebar-sub-header"><a href="/usecases/crop-classification/#supervised-classification-using-random-forest" class="sidebar-link">Supervised classification using Random Forest</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="crop-classification"><a href="#crop-classification" class="header-anchor">#</a> Crop Classification</h1> <p>The goal of this section is to show how openEO functionality can be integrated into a basic feature engineering pipeline. We will do this using crop classification as an example.</p> <p>The constantly increasing demand of food has resulted in a highly intensified agricultural production. This intensification on the one hand requires more planning and management, and on the other, threatens ecosystem services that need to be monitored by scientists and decision makers who rely on detailed spatial information of crop cover in agricultural areas.</p> <p>Crop classification on a large scale is a challenging task, but with the recent advances in satellite sensor technology and the push of a.o. the ESA for higher resolution open satellite data with a frequent revisit time this task has become possible.</p> <p>There are various approaches to crop classification. One can use basic rule-based classification, or use more sophisticated methods such as one of various machine learning models. In this example, we will show both of these approaches.</p> <p>Generally, any classification task will contain the following steps:</p> <ul><li>(1) Preprocessing &amp; feature engineering</li> <li>(2) Training</li> <li>(3) Classification &amp; model evaluation</li></ul> <p>We will have a more detailed look at all three of these steps, and provide code examples along the way.</p> <p>To see a fully working example, you can check out <a href="https://github.com/openEOPlatform/SRR2_notebooks/blob/main/UC3%20-%20Crop%20type%20feature%20engineering%20(rule-based).ipynb" target="_blank" rel="noopener noreferrer">this Python notebook on rule-based classification<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://github.com/openEOPlatform/SRR2_notebooks/blob/main/UC3%20-%20Crop%20type%20feature%20engineering%20using%20random%20forest.ipynb" target="_blank" rel="noopener noreferrer">this Python notebook on classification using Random Forest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p><img src="https://user-images.githubusercontent.com/10434651/138343588-951f9b24-e039-4598-bd31-2d771ce5a615.png" alt="cropcover_closeup"></p> <h2 id="preprocessing-feature-engineering"><a href="#preprocessing-feature-engineering" class="header-anchor">#</a> Preprocessing &amp; feature engineering</h2> <p>Feature engineering refers to extracting a number of discriminative features from a single pixel timeseries or even a time series of EO data tiles. These features can in turn be used for any type of classification, ranging from an expert rule-based decision approach to regular machine learning techniques such as random forest or deep learning techniques based on neural networks.</p> <p>Concrete examples of such features include basic statistics such as the percentiles or standard deviation of a vegetation index or the mean band value for given month, but can also be more complex such as derivatives of phenology or texture.</p> <p>In general, data scientists like to explore the usefulness of a given feature set for a use case, or may even define new features. In some cases, the openEO processes will allow computing them, and in others, a 'user defined function' may be used to compute features that are not directly supported in openEO.</p> <h3 id="data-preparation"><a href="#data-preparation" class="header-anchor">#</a> Data preparation</h3> <p>To correctly compute and use statistics over a timeseries, we need gap-free composites at fixed timesteps. The goal of temporal aggregation is to create these gap-free composites at equidistant temporal intervals. This is especially true in the case of optical data, which is often cloudmasked before this step, introducing a lot of gaps (&quot;no-data&quot; values).</p> <p>Example:</p> <div class="code-switcher"><div class="tab-header"><ul><li class="active"> Python
            </li><li> JavaScript
            </li></ul></div> <div class="tab-content" style="display:;"><div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># Create monthly composite</span>
composite <span class="token operator">=</span> sentinel2_cube<span class="token punctuation">.</span>aggregate_temporal_period<span class="token punctuation">(</span>
    period <span class="token operator">=</span> <span class="token string">&quot;month&quot;</span><span class="token punctuation">,</span>
    reducer <span class="token operator">=</span> <span class="token string">&quot;mean&quot;</span>
<span class="token punctuation">)</span>
<span class="token comment"># Fill gaps with linear interpolation</span>
interpolated <span class="token operator">=</span> composite<span class="token punctuation">.</span>apply_dimension<span class="token punctuation">(</span>
    dimension <span class="token operator">=</span> <span class="token string">&quot;t&quot;</span><span class="token punctuation">,</span>
    process <span class="token operator">=</span> <span class="token string">&quot;array_interpolate_linear&quot;</span>
<span class="token punctuation">)</span>
</code></pre></div></div><div class="tab-content" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Create monthly composite</span>
<span class="token keyword">var</span> <span class="token function-variable function">mean</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">mean</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> composite <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">aggregate_temporal_period</span><span class="token punctuation">(</span>sentinel2_cube<span class="token punctuation">,</span> <span class="token string">&quot;month&quot;</span><span class="token punctuation">,</span> mean<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Fill gaps with linear interpolation</span>
<span class="token keyword">var</span> interpolated <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">apply_dimension</span><span class="token punctuation">(</span>composite<span class="token punctuation">,</span> <span class="token string">&quot;array_interpolate_linear&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;t&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div> <h3 id="computing-temporal-features"><a href="#computing-temporal-features" class="header-anchor">#</a> Computing temporal features</h3> <p>For this use case, we will fully reduce the temporal dimension per band by calculating a number of stastics. These stastics are three quantiles, the mean and the standard deviation for each band. After computing the actual features, we have to make sure to rename the bands to reflect what has been calculated.</p> <p>The effect of setting <code>target_dimension</code> to <code>bands</code> is that the 'time' dimension is removed, and replaced by the 'bands' dimension. We will use this same procedure to do band math on temporal features in the chapter <a href="#rule-based-classification">&quot;Rule-based classification&quot;</a>.</p> <div class="code-switcher"><div class="tab-header"><ul><li class="active"> Python
            </li><li> JavaScript
            </li></ul></div> <div class="tab-content" style="display:;"><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> openeo<span class="token punctuation">.</span>processes <span class="token keyword">import</span> ProcessBuilder<span class="token punctuation">,</span> array_concat

<span class="token keyword">def</span> <span class="token function">compute_features</span><span class="token punctuation">(</span>input_timeseries<span class="token punctuation">:</span> ProcessBuilder<span class="token punctuation">)</span><span class="token punctuation">:</span>
   <span class="token keyword">return</span> array_concat<span class="token punctuation">(</span>
       input_timeseries<span class="token punctuation">.</span>quantiles<span class="token punctuation">(</span>probabilities<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span>input_timeseries<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> input_timeseries<span class="token punctuation">.</span>sd<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token punctuation">)</span>

features <span class="token operator">=</span> interpolated<span class="token punctuation">.</span>apply_dimension<span class="token punctuation">(</span>
   dimension<span class="token operator">=</span><span class="token string">'t'</span><span class="token punctuation">,</span>
   process<span class="token operator">=</span>compute_features<span class="token punctuation">,</span>
   target_dimension<span class="token operator">=</span><span class="token string">'bands'</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

new_band_names <span class="token operator">=</span> <span class="token punctuation">[</span>
   band <span class="token operator">+</span> <span class="token string">&quot;_&quot;</span> <span class="token operator">+</span> stat
   <span class="token keyword">for</span> band <span class="token keyword">in</span> interpolated<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>band_names
   <span class="token keyword">for</span> stat <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">&quot;p10&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;p50&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;p90&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mean&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sd&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>
features <span class="token operator">=</span> features<span class="token punctuation">.</span>rename_labels<span class="token punctuation">(</span><span class="token string">'bands'</span><span class="token punctuation">,</span> new_band_names<span class="token punctuation">)</span>
</code></pre></div></div><div class="tab-content" style="display:none;"><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Create monthly composite</span>
<span class="token keyword">var</span> <span class="token function-variable function">computeFeatures</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">array_concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">quantiles</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">mean</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sd</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> features <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">apply_dimension</span><span class="token punctuation">(</span>interpolated<span class="token punctuation">,</span> computeFeatures<span class="token punctuation">,</span> <span class="token string">'t'</span><span class="token punctuation">,</span> <span class="token string">'bands'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> collectionBands <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'B1'</span><span class="token punctuation">,</span> <span class="token string">'B2'</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Fill this with the bands you've available in the data cube</span>
<span class="token keyword">var</span> stats <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;p10&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;p50&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;p90&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mean&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sd&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> newBandNames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> band <span class="token keyword">of</span> collectionBands<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> stat <span class="token keyword">of</span> stats<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        newBandNames<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>band <span class="token operator">+</span> <span class="token string">&quot;_&quot;</span> <span class="token operator">+</span> stat<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
features <span class="token operator">=</span> features<span class="token punctuation">.</span><span class="token function">rename_labels</span><span class="token punctuation">(</span>features<span class="token punctuation">,</span> <span class="token string">'bands'</span><span class="token punctuation">,</span> newBandNames<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div> <p>Now, a complete datacube with features is available for further usage.</p> <h2 id="model-training"><a href="#model-training" class="header-anchor">#</a> Model training</h2> <p>Crop classification is generally tackled using a form of supervised learning, which requires a set of features with their respective labels. These labels often come in the form of labeled field polygons, however these polygons do not contain any of the features that your model might require. They need to be extracted from the DataCube that you created in the previous section.</p> <p>In OpenEO, we can perform feature point/polygon extraction using the parameter <code>sample_by_feature=True</code>.</p> <div class="code-switcher"><div class="tab-header"><ul><li class="active"> Python
            </li><li> JavaScript
            </li></ul></div> <div class="tab-content" style="display:;"><div class="language-python extra-class"><pre class="language-python"><code>job <span class="token operator">=</span> features<span class="token punctuation">.</span>filter_spatial<span class="token punctuation">(</span>barley_points<span class="token punctuation">)</span><span class="token punctuation">.</span>execute_batch<span class="token punctuation">(</span>
        title<span class="token operator">=</span><span class="token string">&quot;Point feature extraction&quot;</span><span class="token punctuation">,</span>
        description<span class="token operator">=</span><span class="token string">&quot;Feature extraction for p10,p50,p90,sd and tsteps&quot;</span><span class="token punctuation">,</span>
        out_format<span class="token operator">=</span><span class="token string">&quot;netCDF&quot;</span><span class="token punctuation">,</span>
        sample_by_feature<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        job_options<span class="token operator">=</span>job_options<span class="token punctuation">)</span>
results <span class="token operator">=</span> job<span class="token punctuation">.</span>get_results<span class="token punctuation">(</span><span class="token punctuation">)</span>
results<span class="token punctuation">.</span>download_files<span class="token punctuation">(</span><span class="token string">&quot;./data/barley_features&quot;</span><span class="token punctuation">)</span>
</code></pre></div></div><div class="tab-content" style="display:none;"><p><em>No JavaScript code available yet.</em></p></div></div> <p>This will write the features of DataCube <em>features</em> of every point in <em>barley_points</em> to a separate netCDF file. Next we can read in all of these features with their respective label in a pandas dataframe, which can subsequently used for training. Training a model happens outside of openEO and will therefore not be explained in detail here,
but you can have a look at the random forest notebook if that is something you need help with.</p> <h2 id="classification"><a href="#classification" class="header-anchor">#</a> Classification</h2> <h3 id="rule-based-classification"><a href="#rule-based-classification" class="header-anchor">#</a> Rule-based classification</h3> <p>A simple approach is to define rules based on your features to classify crops. For example, when looking at temporal profiles of corn, we can see that the NDVI of may is smaller than the NDVI of june. By creating and iteratively refining rules for each of these crop types, we can get a first classification result.</p> <p>However, to do this, we need to be able to do band math on the temporal dimension. Remember <code>target_dimension=&quot;bands&quot;</code> that we used before to calculate the statistics over the temporal dimension? We can use this again to stack the temporal dimension onto the band dimension.</p> <div class="code-switcher"><div class="tab-header"><ul><li class="active"> Python
            </li><li> JavaScript
            </li></ul></div> <div class="tab-content" style="display:;"><div class="language-python extra-class"><pre class="language-python"><code>all_bands <span class="token operator">=</span> features<span class="token punctuation">.</span>apply_dimension<span class="token punctuation">(</span>dimension<span class="token operator">=</span><span class="token string">'t'</span><span class="token punctuation">,</span> target_dimension<span class="token operator">=</span><span class="token string">'bands'</span><span class="token punctuation">,</span> process<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token operator">*</span><span class="token number">1</span><span class="token punctuation">)</span>
bandnames <span class="token operator">=</span> <span class="token punctuation">[</span>band <span class="token operator">+</span> <span class="token string">&quot;_&quot;</span> <span class="token operator">+</span> stat <span class="token keyword">for</span> band <span class="token keyword">in</span> all_bands<span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>band_names <span class="token keyword">for</span> stat <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">&quot;jan&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;feb&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;mar&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;apr&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;may&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;jun&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;jul&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;aug&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;sep&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;oct&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;nov&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;dec&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
all_bands <span class="token operator">=</span> all_bands<span class="token punctuation">.</span>rename_labels<span class="token punctuation">(</span><span class="token string">'bands'</span><span class="token punctuation">,</span> target<span class="token operator">=</span>bandnames<span class="token punctuation">)</span> 
</code></pre></div></div><div class="tab-content" style="display:none;"><p><em>No JavaScript code available yet.</em></p></div></div> <p>Next, we can do boolean comparison of features and see whether any given pixel matches the rules you determined.</p> <div class="code-switcher"><div class="tab-header"><ul><li class="active"> Python
            </li><li> JavaScript
            </li></ul></div> <div class="tab-content" style="display:;"><div class="language-python extra-class"><pre class="language-python"><code>ndvi_may <span class="token operator">=</span> all_bands<span class="token punctuation">.</span>band<span class="token punctuation">(</span><span class="token string">&quot;NDVI_may&quot;</span><span class="token punctuation">)</span>
ndvi_jun <span class="token operator">=</span> all_bands<span class="token punctuation">.</span>band<span class="token punctuation">(</span><span class="token string">&quot;NDVI_jun&quot;</span><span class="token punctuation">)</span>
ndvi_jul <span class="token operator">=</span> all_bands<span class="token punctuation">.</span>band<span class="token punctuation">(</span><span class="token string">&quot;NDVI_jul&quot;</span><span class="token punctuation">)</span>
ndvi_aug <span class="token operator">=</span> all_bands<span class="token punctuation">.</span>band<span class="token punctuation">(</span><span class="token string">&quot;NDVI_aug&quot;</span><span class="token punctuation">)</span>

corn <span class="token operator">=</span> <span class="token punctuation">(</span>ndvi_may <span class="token operator">&lt;</span> ndvi_jun<span class="token punctuation">)</span>
barley <span class="token operator">=</span> <span class="token punctuation">(</span>ndvi_apr <span class="token operator">&lt;</span> ndvi_may<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>ndvi_jun <span class="token operator">&gt;</span> ndvi_jul<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">2</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div></div><div class="tab-content" style="display:none;"><p><em>No JavaScript code available yet.</em></p></div></div> <p>Each of these rules results in a boolean that can be combined using geometric progression, to obtain a final cube containing all crop type predictions.</p> <h3 id="supervised-classification-using-random-forest"><a href="#supervised-classification-using-random-forest" class="header-anchor">#</a> Supervised classification using Random Forest</h3> <p>A more sophisticated approach is to use a machine learning model such as Random Forest. As mentioned before, training is done after feature extraction outside of openEO, and you can then pickle your model and store it on a repository.
Next, you define a UDF that unpickles your model, predicts, and returns a new DataCube instance that contains the predicted values instead of the features.</p> <div class="code-switcher"><div class="tab-header"><ul><li class="active"> Python
            </li><li> JavaScript
            </li></ul></div> <div class="tab-content" style="display:;"><div class="language-python extra-class"><pre class="language-python"><code>udf_rf <span class="token operator">=</span> <span class="token triple-quoted-string string">&quot;&quot;&quot;
from openeo_udf.api.datacube import DataCube
import pickle
import urllib.request
import xarray
from openeo.udf.xarraydatacube import XarrayDataCube

def apply_datacube(cube: XarrayDataCube, context: dict) -&gt; XarrayDataCube:
   array = cube.get_array()
   stacked_array = array.stack(pixel=(&quot;x&quot;,&quot;y&quot;))
   stacked_array = stacked_array.transpose()
   clf = pickle.load(urllib.request.urlopen(&quot;https://artifactory.vgt.vito.be:443/auxdata-public/openeo/rf_model.pkl&quot;))
   pred_array = clf.predict(stacked_array)
   return DataCube(xarray.DataArray(pred_array.reshape(1,*array.shape[1:]), dims=[&quot;bands&quot;,&quot;y&quot;,&quot;x&quot;]))
&quot;&quot;&quot;</span>

clf_results <span class="token operator">=</span> features<span class="token punctuation">.</span>apply_dimension<span class="token punctuation">(</span>code<span class="token operator">=</span>udf_rf<span class="token punctuation">,</span> runtime<span class="token operator">=</span><span class="token string">&quot;Python&quot;</span><span class="token punctuation">,</span> dimension<span class="token operator">=</span><span class="token string">&quot;bands&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rename_labels<span class="token punctuation">(</span><span class="token string">&quot;bands&quot;</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;pixel&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div></div><div class="tab-content" style="display:none;"><p><em>No JavaScript code available yet.</em></p></div></div> <p>Note that if your labels are strings, you will have to map them to integers.
You can then download the classification results and plot it. Congratulations!</p> <p>To see a fully working example, you can check out <a href="https://github.com/openEOPlatform/SRR2_notebooks/blob/main/UC3%20-%20Crop%20type%20feature%20engineering%20(rule-based).ipynb" target="_blank" rel="noopener noreferrer">this Python notebook on rule-based classification<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://github.com/openEOPlatform/SRR2_notebooks/blob/main/UC3%20-%20Crop%20type%20feature%20engineering%20using%20random%20forest.ipynb" target="_blank" rel="noopener noreferrer">this Python notebook on classification using Random Forest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>We ran the code in that notebook for ~120 MGRS tiles to end up with a crop cover map for 5 countries in Europe, which looks like this:</p> <p><img src="https://user-images.githubusercontent.com/10434651/138342824-32d38fbe-7931-497c-8da3-47bbab7a3870.png" alt="cropcover_5_countries"></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/openEOPlatform/documentation/edit/main/usecases/crop-classification/index.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">10/24/2023, 1:57:17 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.78c61d3e.js" defer></script><script src="/assets/js/11.b8f6fce6.js" defer></script><script src="/assets/js/5.386332f3.js" defer></script><script src="/assets/js/77.d600039d.js" defer></script><script src="/assets/js/55.e65335cd.js" defer></script>
  </body>
</html>
