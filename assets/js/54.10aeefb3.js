(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{315:function(e,t,a){e.exports=a.p+"assets/img/api.2a906ee1.png"},489:function(e,t,a){"use strict";a.r(t);var r=a(4),o=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"federation-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#federation-api"}},[e._v("#")]),e._v(" Federation API")]),e._v(" "),t("p",[e._v("The general contract is the "),t("a",{attrs:{href:"https://api.openeo.org",target:"_blank",rel:"noopener noreferrer"}},[e._v("openEO API"),t("OutboundLink")],1),e._v(" in the latest stable version of the 1.x branch.")]),e._v(" "),t("p",[e._v('The aggregator that proxies the back-ends in the federation also implements the same API, but it also implements the "Federation Extension" (currently in draft state).')]),e._v(" "),t("h2",{attrs:{id:"profiles"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#profiles"}},[e._v("#")]),e._v(" Profiles")]),e._v(" "),t("p",[e._v("In addition to the general openEO API specification and their "),t("a",{attrs:{href:"https://openeo.org/documentation/1.0/developers/profiles/api.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("API Profiles"),t("OutboundLink")],1),e._v(",\nopenEO Platform requires to implement an additional API profile:\n"),t("em",[e._v("LP: Required for openEO Platform")]),e._v(", which requires the openEO profile "),t("em",[e._v("L2: Recommended")]),e._v(".\nThe requirement to implement two of "),t("em",[e._v("L1A")]),e._v(", "),t("em",[e._v("L1B")]),e._v(", and "),t("em",[e._v("L1C")]),e._v(" has been restricted for openEO Platform to always require "),t("em",[e._v("L1A: Synchronous Processing")]),e._v(" and "),t("em",[e._v("L1B: Batch Jobs")]),e._v(" (see req. no. 703). This means that "),t("em",[e._v("L1C: Secondary Web Services")]),e._v(" is optional.")]),e._v(" "),t("figure",[t("img",{attrs:{src:a(315),alt:"The hierarchy of openEO and openEO Platform API profiles."}}),e._v(" "),t("figcaption",[e._v("An overview of the openEO and openEO Platform API profiles.")])]),e._v(" "),t("h3",{attrs:{id:"lp-required-for-openeo-platform"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lp-required-for-openeo-platform"}},[e._v("#")]),e._v(" LP: Required for openEO Platform")]),e._v(" "),t("p",[e._v("The profile only lists requirements that are not covered by the openEO profile "),t("em",[e._v("L2: Recommended")]),e._v(" yet.")]),e._v(" "),t("h4",{attrs:{id:"api-fundamentals"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#api-fundamentals"}},[e._v("#")]),e._v(" API fundamentals")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("#")]),e._v(" "),t("th",[e._v("Functionality")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("14")]),e._v(" "),t("td",[e._v("All > Billing")]),e._v(" "),t("td",[e._v("Supports the openEO Platform credit system")])])])]),e._v(" "),t("h4",{attrs:{id:"file-formats"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#file-formats"}},[e._v("#")]),e._v(" File Formats")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("#")]),e._v(" "),t("th",[e._v("Functionality")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("45")]),e._v(" "),t("td",[t("code",[e._v("GET /file_formats")])]),e._v(" "),t("td",[e._v("File format names and parameters aligned with openEO Platform as defined for the pre-defined "),t("RouterLink",{attrs:{to:"/federation/backends/fileformats.html"}},[e._v("file formats")])],1)])])]),e._v(" "),t("h4",{attrs:{id:"other"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#other"}},[e._v("#")]),e._v(" Other")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("#")]),e._v(" "),t("th",[e._v("Functionality")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("90")]),e._v(" "),t("td",[t("code",[e._v("GET /health")])]),e._v(" "),t("td",[e._v("Returns 2XX or 5XX http status code (without authentication)")])])])]),e._v(" "),t("h4",{attrs:{id:"auth"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#auth"}},[e._v("#")]),e._v(" Auth")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("#")]),e._v(" "),t("th",[e._v("Functionality")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("113")]),e._v(" "),t("td",[t("code",[e._v("GET /credentials/oidc")])]),e._v(" "),t("td",[e._v("Supports EGI as identity provider (including tokens)")])]),e._v(" "),t("tr",[t("td",[e._v("118")]),e._v(" "),t("td",[t("code",[e._v("GET /credentials/oidc")])]),e._v(" "),t("td",[e._v("Supports the required entitlements of the vo.openeo.cloud virtual organization, especially the claim eduperson_entitlement")])])])]),e._v(" "),t("p",[e._v("For more details about "),t("a",{attrs:{href:"#authentication-and-authorization"}},[e._v("Authentication and Authorization")]),e._v(", please see the corresponding chapters below.")]),e._v(" "),t("h4",{attrs:{id:"pre-defined-processes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pre-defined-processes"}},[e._v("#")]),e._v(" Pre-defined Processes")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("#")]),e._v(" "),t("th",[e._v("Functionality")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("205")]),e._v(" "),t("td",[t("code",[e._v("GET /processes")]),e._v(" > processes")]),e._v(" "),t("td",[e._v("All processes are valid according to the specification (id, description, parameters, returns are required)")])]),e._v(" "),t("tr",[t("td",[e._v("208")]),e._v(" "),t("td",[t("code",[e._v("GET /processes")]),e._v(" > processes")]),e._v(" "),t("td",[e._v("Processes are marked as experimental or deprecated if applicable")])])])]),e._v(" "),t("h4",{attrs:{id:"collections"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#collections"}},[e._v("#")]),e._v(" Collections")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("#")]),e._v(" "),t("th",[e._v("Functionality")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("311")]),e._v(" "),t("td",[t("code",[e._v("GET /collections")]),e._v(" > collections")]),e._v(" "),t("td",[e._v("Collections are marked as experimental or deprecated if applicable")])]),e._v(" "),t("tr",[t("td",[e._v("324")]),e._v(" "),t("td",[t("code",[e._v("GET /collections/{id}")]),e._v(" > id")]),e._v(" "),t("td",[e._v("IDs follow the openEO Platform naming convention")])]),e._v(" "),t("tr",[t("td",[e._v("327")]),e._v(" "),t("td",[t("code",[e._v("GET /collections/{id}")]),e._v(" > providers")]),e._v(" "),t("td",[e._v("Each collection needs to expose the backend offering the data")])])])]),e._v(" "),t("h4",{attrs:{id:"data-processing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#data-processing"}},[e._v("#")]),e._v(" Data Processing")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("#")]),e._v(" "),t("th",[e._v("Functionality")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("703")]),e._v(" "),t("td"),e._v(" "),t("td",[e._v("Batch jobs and synchronous processing are implemented (secondary web services are optional)")])]),e._v(" "),t("tr",[t("td",[e._v("704")]),e._v(" "),t("td"),e._v(" "),t("td",[e._v("Time after which batch job results get automatically deleted: 90 days or later")])]),e._v(" "),t("tr",[t("td",[e._v("705")]),e._v(" "),t("td"),e._v(" "),t("td",[e._v("Time after which batch job metadata gets automatically deleted: 1 year or later")])])])]),e._v(" "),t("h4",{attrs:{id:"batch-jobs-results"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#batch-jobs-results"}},[e._v("#")]),e._v(" Batch Jobs > Results")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("#")]),e._v(" "),t("th",[e._v("Functionality")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("873")]),e._v(" "),t("td",[t("code",[e._v("GET /jobs/{id}/results")]),e._v(" > public access link")]),e._v(" "),t("td",[e._v("Default expiry time of the signed URLs for results: 7 days")])])])]),e._v(" "),t("h4",{attrs:{id:"synchronous-processing"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#synchronous-processing"}},[e._v("#")]),e._v(" Synchronous Processing")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("#")]),e._v(" "),t("th",[e._v("Functionality")]),e._v(" "),t("th",[e._v("Description")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[e._v("920")]),e._v(" "),t("td",[t("code",[e._v("POST /result")]),e._v(" > timeout")]),e._v(" "),t("td",[e._v("The timeout for synchronous calls is: 5 minutes")])])])]),e._v(" "),t("h2",{attrs:{id:"authentication-and-authorization"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#authentication-and-authorization"}},[e._v("#")]),e._v(" Authentication and authorization")]),e._v(" "),t("p",[e._v("This important aspect of the federation is standardized by the "),t("a",{attrs:{href:"https://aarc-project.eu/architecture/",target:"_blank",rel:"noopener noreferrer"}},[e._v("AARC Blueprint Architecture"),t("OutboundLink")],1),e._v(". EGI Check-in is the concrete implementation that is currently in use.")]),e._v(" "),t("h3",{attrs:{id:"authentication"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#authentication"}},[e._v("#")]),e._v(" Authentication")]),e._v(" "),t("p",[e._v("The openEO platform federation standardizes on the use of "),t("a",{attrs:{href:"https://aai.egi.eu",target:"_blank",rel:"noopener noreferrer"}},[e._v("EGI Check-in"),t("OutboundLink")],1),e._v(" as identity provider. Backends have to support the use of openID connect + PKCE, to enable this and register a client with EGI Check-in.")]),e._v(" "),t("h3",{attrs:{id:"authorization"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#authorization"}},[e._v("#")]),e._v(" Authorization")]),e._v(" "),t("h4",{attrs:{id:"entitlements"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#entitlements"}},[e._v("#")]),e._v(" Entitlements")]),e._v(" "),t("p",[e._v("Users of the federation are organized under the 'vo.openeo.cloud' virtual organization in EGI Check-in. Inside the virtual organization, different roles can be assigned to a user, to indicate that they have a certain subscription, or even on a more fine-grained level are entitled to specific actions or resources.\nThe mechanism to check this, is again supported by EGI Check-in, under the 'eduperson_entitlement' claim: "),t("a",{attrs:{href:"https://docs.egi.eu/providers/check-in/sp/#claims",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.egi.eu/providers/check-in/sp/#claims"),t("OutboundLink")],1)]),e._v(" "),t("h4",{attrs:{id:"credits"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#credits"}},[e._v("#")]),e._v(" Credits")]),e._v(" "),t("p",[e._v("The second criterium for authorization is based on credits that are available to a user. Credits allow the platform to limit the volume of data access and processing operations that a user can perform during a given time frame. The amount of available credits depends on the subscription.\nWhen the credit balance of a user goes below zero, processing operations can be blocked.")]),e._v(" "),t("h4",{attrs:{id:"aggregator-rules"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#aggregator-rules"}},[e._v("#")]),e._v(" Aggregator rules")]),e._v(" "),t("p",[e._v("Based on the subscription and available credits, the aggregator can implement these rules:")]),e._v(" "),t("ol",[t("li",[e._v("Credit checks to block starting of batch jobs, synchronous requests to /result and viewing services.")]),e._v(" "),t("li",[e._v("Rate limiting (TBD)")])]),e._v(" "),t("h4",{attrs:{id:"backend-rules"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#backend-rules"}},[e._v("#")]),e._v(" Backend rules")]),e._v(" "),t("p",[e._v("Some authorization rules will need to be enforced by the backends themselves:")]),e._v(" "),t("ol",[t("li",[e._v("Basic access and access to user specific resources based on subscription role.")]),e._v(" "),t("li",[e._v("Number of concurrent batch jobs")]),e._v(" "),t("li",[e._v("Available processing resources, batch job priorities")]),e._v(" "),t("li",[e._v("Batch job result data volume")]),e._v(" "),t("li",[e._v("Access to restricted collections")])])])}),[],!1,null,null,null);t.default=o.exports}}]);